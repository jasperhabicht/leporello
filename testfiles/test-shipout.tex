% run with LuaLaTeX to show the frames
\documentclass{article}
\usepackage{lipsum}
\usepackage{lua-visual-debug}

\ExplSyntaxOn


\dim_new:N \g_leporello_remaining_space_dim
\cs_new_protected:Npn \leporello_update_remaining_space: {
  \dim_gset_eq:NN \g_leporello_remaining_space_dim \tex_vsize:D
  \dim_compare:nNnF { \tex_pagegoal:D } = { \c_max_dim } {
    \dim_set:Nn \g_leporello_remaining_space_dim {
      \tex_pagegoal:D - \tex_pagetotal:D
    }
  }
  \iow_log:e {
    \dim_to_decimal_in_mm:n { \dim_use:N \g_leporello_remaining_space_dim }
  }
}

\NewDocumentCommand{\myremainingspace}{}{
  \leporello_update_remaining_space:
}


\ExplSyntaxOff

\begin{document}
\myremainingspace


\rule { 2cm } { 2cm } 
\par \myremainingspace


\end{document}